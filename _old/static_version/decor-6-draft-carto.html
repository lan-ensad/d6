<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cartographie des Contributeurices</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .control-section h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #34495e;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
        }

        .main-content {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 300px;
            flex-shrink: 0;
        }

        .legend {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .legend h3 {
            margin-top: 0;
            color: #34495e;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .legend h4 {
            margin: 15px 0 8px 0;
            color: #495057;
            font-size: 14px;
            font-weight: 600;
        }

        .legend-section {
            margin-bottom: 20px;
        }

        .legend-filters-container {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .legend-row {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 15px;
            margin-bottom: 8px;
            min-width: 120px;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .legend-filter {
            cursor: pointer;
            user-select: none;
            border: 1px solid transparent;
        }

        .legend-filter:hover {
            background-color: #f8f9fa;
            transform: translateY(-1px);
        }

        .legend-filter.active {
            background-color: #e3f2fd;
            border: 1px solid #2196f3;
        }

        .legend-filter:not(.active) {
            opacity: 0.5;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
        }

        .legend-symbol {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            border: 2px solid #fff;
        }

        .legend-symbol.contributor-internal {
            background-color: transparent;
            border: 2px solid #333;
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .legend-symbol.contributor-external {
            background-color: transparent;
            border: 2px solid #333;
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }

        .legend-symbol.topic {
            background-color: #95a5a6;
            width: 12px;
            height: 12px;
            transform: rotate(45deg);
            border-radius: 0;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
            border: 1px solid #ddd;
        }

        .visualization {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            flex: 1;
        }

        .info-panel {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-height: 100px;
        }

        .info-panel h3 {
            margin-top: 0;
            color: #34495e;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
        }

        #info-content {
            line-height: 1.6;
        }

        .filter-btn, .action-btn {
            background-color: #FFFFFF;
            border: 1px solid rgb(209,213,219);
            border-radius: .5rem;
            box-sizing: border-box;
            color: #111827;
            font-family: "Inter var",ui-sans-serif,system-ui,-apple-system,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: .875rem;
            font-weight: 600;
            line-height: 1.25rem;
            padding: .75rem 1rem;
            margin: 5px;
            text-align: center;
            text-decoration: none #D1D5DB solid;
            text-decoration-thickness: auto;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }

        .filter-btn:hover, .action-btn:hover {
            background-color: rgb(249,250,251);
        }

        .filter-btn.active {
            background-color: #3B82F6;
            color: white;
            border-color: #3B82F6;
        }

        .filter-select {
            background-color: #FFFFFF;
            border: 1px solid rgb(209,213,219);
            border-radius: .5rem;
            box-sizing: border-box;
            color: #111827;
            font-family: "Inter var",ui-sans-serif,system-ui,-apple-system,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            font-size: .875rem;
            font-weight: 600;
            line-height: 1.25rem;
            padding: .75rem 1rem;
            margin: 5px;
            text-align: left;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
            transition: all 0.2s ease;
            min-width: 200px;
        }

        .node {
            cursor: pointer;
            stroke: #fff;
            stroke-width: 2px;
            transition: all 0.3s ease;
        }

        .node:hover, .node-group:hover .node {
            stroke-width: 4px;
            stroke: #2c3e50;
        }

        .node.highlighted, .node-group.highlighted .node {
            stroke: #f39c12;
            stroke-width: 4px;
        }

        .node-group {
            cursor: pointer;
        }

        .link {
            stroke: #95a5a6;
            stroke-opacity: 0.4;
            stroke-width: 1px;
            transition: all 0.3s ease;
        }

        .link:hover, .link.highlighted {
            stroke-opacity: 0.8;
            stroke-width: 2px;
            stroke: #e74c3c;
        }

        .node-label {
            font-family: 'Segoe UI', sans-serif;
            font-size: 11px;
            font-weight: 500;
            fill: #2c3e50;
            text-anchor: middle;
            pointer-events: none;
            opacity: 0.8;
        }

        .node-label.topic-label {
            font-size: 9px;
            fill: #7f8c8d;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .controls {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }

            .main-content {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
            }
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 400px;
            font-size: 18px;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cartographie des Contributeurices</h1>


        <div class="main-content">
            <div class="visualization">
                <svg id="network"></svg>
            </div>

            <div class="sidebar">
                <div class="info-panel" id="info-panel">
                    <h3>Informations</h3>
                    <div id="info-content">
                        Survolez un élément pour voir les détails
                    </div>
                </div>

                <div class="legend">
                    <h3>Légende (Cliquez pour filtrer)</h3>
                    <div class="legend-row">
                        <div class="legend-item legend-filter active" data-filter="source" data-value="internal">
                            <span class="legend-symbol contributor-internal"></span>
                            <span>Contributeur interne</span>
                        </div>
                        <div class="legend-item legend-filter active" data-filter="source" data-value="external">
                            <span class="legend-symbol contributor-external"></span>
                            <span>Contributeur externe</span>
                        </div>
                    </div>
                    <div class="legend-section">
                        <h4>Types de production</h4>
                        <div id="legend-quoi" class="legend-filters-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Données intégrées directement dans le HTML
        const NETWORK_DATA ={
  "links": [
    {
      "quoi": "image, jeux vid\u00e9o, web",
      "source": "contributor_0",
      "strength": 1,
      "target": "topic_0"
    },
    {
      "quoi": "image, jeux vid\u00e9o, web",
      "source": "contributor_0",
      "strength": 1,
      "target": "topic_1"
    },
    {
      "quoi": "texte",
      "source": "contributor_1",
      "strength": 1,
      "target": "topic_2"
    },
    {
      "quoi": "texte",
      "source": "contributor_1",
      "strength": 1,
      "target": "topic_3"
    },
    {
      "quoi": "texte",
      "source": "contributor_1",
      "strength": 1,
      "target": "topic_4"
    },
    {
      "quoi": "texte",
      "source": "contributor_1",
      "strength": 1,
      "target": "topic_5"
    },
    {
      "quoi": "son, web",
      "source": "contributor_2",
      "strength": 1,
      "target": "topic_6"
    },
    {
      "quoi": "son, web",
      "source": "contributor_2",
      "strength": 1,
      "target": "topic_7"
    },
    {
      "quoi": "son, web",
      "source": "contributor_2",
      "strength": 1,
      "target": "topic_8"
    },
    {
      "quoi": "image",
      "source": "contributor_3",
      "strength": 1,
      "target": "topic_9"
    },
    {
      "quoi": "image",
      "source": "contributor_3",
      "strength": 1,
      "target": "topic_10"
    },
    {
      "quoi": "image",
      "source": "contributor_3",
      "strength": 1,
      "target": "topic_8"
    },
    {
      "quoi": "image, vid\u00e9o",
      "source": "contributor_4",
      "strength": 1,
      "target": "topic_11"
    },
    {
      "quoi": "image, vid\u00e9o",
      "source": "contributor_4",
      "strength": 1,
      "target": "topic_7"
    },
    {
      "quoi": "image, vid\u00e9o",
      "source": "contributor_4",
      "strength": 1,
      "target": "topic_8"
    },
    {
      "quoi": "image, vid\u00e9o",
      "source": "contributor_5",
      "strength": 1,
      "target": "topic_12"
    },
    {
      "quoi": "image, vid\u00e9o",
      "source": "contributor_5",
      "strength": 1,
      "target": "topic_7"
    },
    {
      "quoi": "image, vid\u00e9o",
      "source": "contributor_5",
      "strength": 1,
      "target": "topic_13"
    },
    {
      "quoi": "image, vid\u00e9o",
      "source": "contributor_5",
      "strength": 1,
      "target": "topic_14"
    },
    {
      "quoi": "image",
      "source": "contributor_6",
      "strength": 1,
      "target": "topic_11"
    },
    {
      "quoi": "image",
      "source": "contributor_6",
      "strength": 1,
      "target": "topic_7"
    },
    {
      "quoi": "image",
      "source": "contributor_7",
      "strength": 1,
      "target": "topic_11"
    },
    {
      "quoi": "image",
      "source": "contributor_7",
      "strength": 1,
      "target": "topic_15"
    },
    {
      "quoi": "image",
      "source": "contributor_8",
      "strength": 1,
      "target": "topic_11"
    },
    {
      "quoi": "image",
      "source": "contributor_8",
      "strength": 1,
      "target": "topic_16"
    },
    {
      "quoi": "image",
      "source": "contributor_8",
      "strength": 1,
      "target": "topic_7"
    },
    {
      "quoi": "image",
      "source": "contributor_9",
      "strength": 1,
      "target": "topic_11"
    },
    {
      "quoi": "image",
      "source": "contributor_9",
      "strength": 1,
      "target": "topic_17"
    },
    {
      "quoi": "interview",
      "source": "contributor_10",
      "strength": 1,
      "target": "topic_18"
    },
    {
      "quoi": "interview",
      "source": "contributor_10",
      "strength": 1,
      "target": "topic_19"
    },
    {
      "quoi": "interview",
      "source": "contributor_10",
      "strength": 1,
      "target": "topic_11"
    },
    {
      "quoi": "texte, image",
      "source": "contributor_11",
      "strength": 1,
      "target": "topic_20"
    },
    {
      "quoi": "texte, image",
      "source": "contributor_11",
      "strength": 1,
      "target": "topic_21"
    },
    {
      "quoi": "texte, image",
      "source": "contributor_11",
      "strength": 1,
      "target": "topic_22"
    },
    {
      "quoi": "texte, image",
      "source": "contributor_11",
      "strength": 1,
      "target": "topic_19"
    },
    {
      "quoi": "texte",
      "source": "contributor_12",
      "strength": 1,
      "target": "topic_16"
    },
    {
      "quoi": "texte",
      "source": "contributor_12",
      "strength": 1,
      "target": "topic_21"
    },
    {
      "quoi": "image",
      "source": "contributor_13",
      "strength": 1,
      "target": "topic_23"
    },
    {
      "quoi": "image",
      "source": "contributor_13",
      "strength": 1,
      "target": "topic_24"
    },
    {
      "quoi": "texte",
      "source": "contributor_14",
      "strength": 1,
      "target": "topic_25"
    },
    {
      "quoi": "texte",
      "source": "contributor_14",
      "strength": 1,
      "target": "topic_26"
    },
    {
      "quoi": "image",
      "source": "contributor_15",
      "strength": 1,
      "target": "topic_11"
    },
    {
      "quoi": "image",
      "source": "contributor_15",
      "strength": 1,
      "target": "topic_27"
    },
    {
      "quoi": "image",
      "source": "contributor_16",
      "strength": 1,
      "target": "topic_11"
    },
    {
      "quoi": "image",
      "source": "contributor_16",
      "strength": 1,
      "target": "topic_24"
    },
    {
      "quoi": "image, son, vid\u00e9o, web",
      "source": "contributor_17",
      "strength": 1,
      "target": "topic_28"
    },
    {
      "quoi": "image, son, vid\u00e9o, web",
      "source": "contributor_17",
      "strength": 1,
      "target": "topic_14"
    },
    {
      "quoi": "texte",
      "source": "contributor_18",
      "strength": 1,
      "target": "topic_2"
    },
    {
      "quoi": "texte",
      "source": "contributor_18",
      "strength": 1,
      "target": "topic_3"
    },
    {
      "quoi": "texte",
      "source": "contributor_18",
      "strength": 1,
      "target": "topic_4"
    },
    {
      "quoi": "texte",
      "source": "contributor_18",
      "strength": 1,
      "target": "topic_5"
    },
    {
      "quoi": "image, son, vid\u00e9o, web",
      "source": "contributor_19",
      "strength": 1,
      "target": "topic_5"
    },
    {
      "quoi": "image, son, vid\u00e9o, web",
      "source": "contributor_19",
      "strength": 1,
      "target": "topic_29"
    },
    {
      "quoi": "image, son, vid\u00e9o, web",
      "source": "contributor_19",
      "strength": 1,
      "target": "topic_14"
    },
    {
      "quoi": "image, son, vid\u00e9o, web",
      "source": "contributor_20",
      "strength": 1,
      "target": "topic_30"
    },
    {
      "quoi": "image, son, vid\u00e9o, web",
      "source": "contributor_20",
      "strength": 1,
      "target": "topic_3"
    },
    {
      "quoi": "image, son, vid\u00e9o, web",
      "source": "contributor_20",
      "strength": 1,
      "target": "topic_5"
    }
  ],
  "nodes": [
    {
      "group": 7,
      "id": "contributor_0",
      "name": "Stell + Angelo Carreri",
      "quoi": "image, jeux vid\u00e9o, web",
      "source": "internal",
      "topic": "jeux vid\u00e9o, queer",
      "type": "contributor"
    },
    {
      "group": 10,
      "id": "topic_0",
      "name": "jeux vid\u00e9o",
      "type": "topic"
    },
    {
      "group": 11,
      "id": "topic_1",
      "name": "queer",
      "type": "topic"
    },
    {
      "group": 3,
      "id": "contributor_1",
      "name": "Justinien Tribillon + SoNi/FaLo",
      "quoi": "texte",
      "source": "internal",
      "topic": "\u00e9chelles, infrastructures, \u00e9nergie, espace",
      "type": "contributor"
    },
    {
      "group": 12,
      "id": "topic_2",
      "name": "\u00e9chelles",
      "type": "topic"
    },
    {
      "group": 13,
      "id": "topic_3",
      "name": "infrastructures",
      "type": "topic"
    },
    {
      "group": 14,
      "id": "topic_4",
      "name": "\u00e9nergie",
      "type": "topic"
    },
    {
      "group": 10,
      "id": "topic_5",
      "name": "espace",
      "type": "topic"
    },
    {
      "group": 0,
      "id": "contributor_2",
      "name": "Bertrand Gauguet + Benoit Monting\u00e9",
      "quoi": "son, web",
      "source": "internal",
      "topic": "son, IA, web",
      "type": "contributor"
    },
    {
      "group": 11,
      "id": "topic_6",
      "name": "son",
      "type": "topic"
    },
    {
      "group": 12,
      "id": "topic_7",
      "name": "IA",
      "type": "topic"
    },
    {
      "group": 13,
      "id": "topic_8",
      "name": "web",
      "type": "topic"
    },
    {
      "group": 7,
      "id": "contributor_3",
      "name": "Charlie Aubry",
      "quoi": "image",
      "source": "internal",
      "topic": "image, low tech, web",
      "type": "contributor"
    },
    {
      "group": 14,
      "id": "topic_9",
      "name": "image",
      "type": "topic"
    },
    {
      "group": 10,
      "id": "topic_10",
      "name": "low tech",
      "type": "topic"
    },
    {
      "group": 1,
      "id": "contributor_4",
      "name": "Olivain Porry + Albertine Meunier",
      "quoi": "image, vid\u00e9o",
      "source": "internal",
      "topic": "portefolio, IA, web",
      "type": "contributor"
    },
    {
      "group": 11,
      "id": "topic_11",
      "name": "portefolio",
      "type": "topic"
    },
    {
      "group": 1,
      "id": "contributor_5",
      "name": "Flora Bouteille + Victor Villafane",
      "quoi": "image, vid\u00e9o",
      "source": "internal",
      "topic": "rendu MRC, IA, performance, nouveaux medias",
      "type": "contributor"
    },
    {
      "group": 12,
      "id": "topic_12",
      "name": "rendu MRC",
      "type": "topic"
    },
    {
      "group": 13,
      "id": "topic_13",
      "name": "performance",
      "type": "topic"
    },
    {
      "group": 14,
      "id": "topic_14",
      "name": "nouveaux medias",
      "type": "topic"
    },
    {
      "group": 7,
      "id": "contributor_6",
      "name": "St\u00e9phane Degoutin",
      "quoi": "image",
      "source": "internal",
      "topic": "portefolio, IA",
      "type": "contributor"
    },
    {
      "group": 7,
      "id": "contributor_7",
      "name": "Maude Guiraud",
      "quoi": "image",
      "source": "internal",
      "topic": "portefolio, textile",
      "type": "contributor"
    },
    {
      "group": 10,
      "id": "topic_15",
      "name": "textile",
      "type": "topic"
    },
    {
      "group": 7,
      "id": "contributor_8",
      "name": "Corentin Loubet",
      "quoi": "image",
      "source": "internal",
      "topic": "portefolio, surveillance, IA",
      "type": "contributor"
    },
    {
      "group": 11,
      "id": "topic_16",
      "name": "surveillance",
      "type": "topic"
    },
    {
      "group": 7,
      "id": "contributor_9",
      "name": "Marie Lechner",
      "quoi": "image",
      "source": "internal",
      "topic": "portefolio, choix d\u2019artistes",
      "type": "contributor"
    },
    {
      "group": 12,
      "id": "topic_17",
      "name": "choix d\u2019artistes",
      "type": "topic"
    },
    {
      "group": 4,
      "id": "contributor_10",
      "name": "Jean-No\u00ebl Lafargue",
      "quoi": "interview",
      "source": "external",
      "topic": "outils, p\u00e9dagogie, portefolio",
      "type": "contributor"
    },
    {
      "group": 13,
      "id": "topic_18",
      "name": "outils",
      "type": "topic"
    },
    {
      "group": 14,
      "id": "topic_19",
      "name": "p\u00e9dagogie",
      "type": "topic"
    },
    {
      "group": 9,
      "id": "contributor_11",
      "name": "ERG Bruxelles",
      "quoi": "texte, image",
      "source": "external",
      "topic": "Cross-over, hacking social, institution, p\u00e9dagogie",
      "type": "contributor"
    },
    {
      "group": 10,
      "id": "topic_20",
      "name": "Cross-over",
      "type": "topic"
    },
    {
      "group": 11,
      "id": "topic_21",
      "name": "hacking social",
      "type": "topic"
    },
    {
      "group": 12,
      "id": "topic_22",
      "name": "institution",
      "type": "topic"
    },
    {
      "group": 3,
      "id": "contributor_12",
      "name": "F\u00e9lix Tr\u00e9guer",
      "quoi": "texte",
      "source": "external",
      "topic": "surveillance, hacking social",
      "type": "contributor"
    },
    {
      "group": 7,
      "id": "contributor_13",
      "name": "Outdoor computer club",
      "quoi": "image",
      "source": "external",
      "topic": "Cyberfeminisme, feminisme",
      "type": "contributor"
    },
    {
      "group": 13,
      "id": "topic_23",
      "name": "Cyberfeminisme",
      "type": "topic"
    },
    {
      "group": 14,
      "id": "topic_24",
      "name": "feminisme",
      "type": "topic"
    },
    {
      "group": 3,
      "id": "contributor_14",
      "name": "Saul Pandelakis + Anthonu Mazure",
      "quoi": "texte",
      "source": "external",
      "topic": "Sex-bot, fiction",
      "type": "contributor"
    },
    {
      "group": 10,
      "id": "topic_25",
      "name": "Sex-bot",
      "type": "topic"
    },
    {
      "group": 11,
      "id": "topic_26",
      "name": "fiction",
      "type": "topic"
    },
    {
      "group": 7,
      "id": "contributor_15",
      "name": "https://cyber.nymph.garden/",
      "quoi": "image",
      "source": "external",
      "topic": "portefolio, worshop",
      "type": "contributor"
    },
    {
      "group": 12,
      "id": "topic_27",
      "name": "worshop",
      "type": "topic"
    },
    {
      "group": 7,
      "id": "contributor_16",
      "name": "Iona Vreme Moser",
      "quoi": "image",
      "source": "external",
      "topic": "portefolio, feminisme",
      "type": "contributor"
    },
    {
      "group": 5,
      "id": "contributor_17",
      "name": "Sumboy",
      "quoi": "image, son, vid\u00e9o, web",
      "source": "external",
      "topic": "decolonialisme, nouveaux medias",
      "type": "contributor"
    },
    {
      "group": 13,
      "id": "topic_28",
      "name": "decolonialisme",
      "type": "topic"
    },
    {
      "group": 3,
      "id": "contributor_18",
      "name": "Soline Nivet / Fanny Lopez + JuTr",
      "quoi": "texte",
      "source": "external",
      "topic": "\u00e9chelles, infrastructures, \u00e9nergie, espace",
      "type": "contributor"
    },
    {
      "group": 5,
      "id": "contributor_19",
      "name": "Feldup",
      "quoi": "image, son, vid\u00e9o, web",
      "source": "external",
      "topic": "espace, ruines num\u00e9rique, nouveaux medias",
      "type": "contributor"
    },
    {
      "group": 14,
      "id": "topic_29",
      "name": "ruines num\u00e9rique",
      "type": "topic"
    },
    {
      "group": 5,
      "id": "contributor_20",
      "name": "Ashikara",
      "quoi": "image, son, vid\u00e9o, web",
      "source": "external",
      "topic": "Jeux-vid\u00e9o, infrastructures, espace",
      "type": "contributor"
    },
    {
      "group": 10,
      "id": "topic_30",
      "name": "Jeux-vid\u00e9o",
      "type": "topic"
    }
  ]
};

        // Version adaptée du NetworkVisualization pour les données statiques
        class NetworkVisualization {
            constructor() {
                this.svg = d3.select('#network');
                this.container = this.svg.append('g');

                this.width = 1200;
                this.height = 700;
                this.svg.attr('width', this.width).attr('height', this.height);

                // Zoom et pan
                this.zoom = d3.zoom()
                    .scaleExtent([0.1, 4])
                    .on('zoom', (event) => {
                        this.container.attr('transform', event.transform);
                    });

                this.svg.call(this.zoom);

                this.colorScale = d3.scaleOrdinal(d3.schemeSet3);
                this.data = NETWORK_DATA;
                this.filteredData = null;
                this.currentFilters = {
                    quoi: 'all',
                    topic: 'all',
                    source: 'all'
                };

                // Nouveau système de filtres actifs
                this.activeFilters = {
                    source: new Set(['internal', 'external']),
                    quoi: new Set()
                };

                this.showLabels = true;
                this.simulation = null;

                this.loadData();
                this.setupLegendClickHandlers();
            }

            setupLegendClickHandlers() {
                // Gestionnaires pour les filtres source
                document.addEventListener('click', (event) => {
                    if (event.target.closest('.legend-filter[data-filter="source"]')) {
                        const element = event.target.closest('.legend-filter');
                        const value = element.getAttribute('data-value');
                        this.toggleSourceFilter(value);
                    }

                    // Gestionnaires pour les filtres quoi (ajoutés dynamiquement)
                    if (event.target.closest('.legend-filter[data-filter="quoi"]')) {
                        const element = event.target.closest('.legend-filter');
                        const value = element.getAttribute('data-value');
                        this.toggleQuoiFilter(value);
                    }
                });
            }

            toggleSourceFilter(source) {
                const legendItem = document.querySelector(`[data-filter="source"][data-value="${source}"]`);

                if (this.activeFilters.source.has(source)) {
                    this.activeFilters.source.delete(source);
                    legendItem.classList.remove('active');
                } else {
                    this.activeFilters.source.add(source);
                    legendItem.classList.add('active');
                }

                this.applyActiveFilters();
            }

            toggleQuoiFilter(type) {
                const legendItem = document.querySelector(`[data-filter="quoi"][data-value="${type}"]`);

                if (this.activeFilters.quoi.has(type)) {
                    this.activeFilters.quoi.delete(type);
                    legendItem.classList.remove('active');
                } else {
                    this.activeFilters.quoi.add(type);
                    legendItem.classList.add('active');
                }

                this.applyActiveFilters();
            }

            loadData() {
                this.setupFilters();
                this.setupLegend();

                this.filteredData = {
                    nodes: this.data.nodes.slice(),
                    links: this.data.links.slice()
                };

                requestAnimationFrame(() => {
                    this.updateVisualization();
                });
            }

            setupFilters() {
                const allQuoiTypes = this.data.nodes
                    .filter(n => n.type === 'contributor' && n.quoi)
                    .map(n => n.quoi);

                const uniqueQuoiTypes = new Set();
                allQuoiTypes.forEach(quoiString => {
                    if (quoiString.includes(',')) {
                        quoiString.split(',').forEach(type => {
                            uniqueQuoiTypes.add(type.trim());
                        });
                    } else {
                        uniqueQuoiTypes.add(quoiString.trim());
                    }
                });

                const quoiTypesArray = Array.from(uniqueQuoiTypes).sort();

                // Initialiser tous les types comme actifs
                this.activeFilters.quoi = new Set(quoiTypesArray);

                // Créer la légende cliquable pour les types Quoi
                const legendContainer = d3.select('#legend-quoi');
                legendContainer.selectAll('*').remove();

                quoiTypesArray.forEach(type => {
                    const item = legendContainer.append('div')
                        .attr('class', 'legend-item legend-filter active')
                        .attr('data-filter', 'quoi')
                        .attr('data-value', type);

                    item.append('span')
                        .attr('class', 'legend-color')
                        .style('background-color', this.colorScale(type));

                    item.append('span')
                        .text(type);
                });

                this.setupTopicFilters();
            }

            setupTopicFilters() {
                const allTopics = this.data.nodes
                    .filter(n => n.type === 'contributor' && n.topic)
                    .map(n => n.topic);

                const uniqueTopics = new Set();
                allTopics.forEach(topicString => {
                    if (topicString.includes(',')) {
                        topicString.split(',').forEach(topic => {
                            uniqueTopics.add(topic.trim());
                        });
                    } else {
                        uniqueTopics.add(topicString.trim());
                    }
                });

                const topicsArray = Array.from(uniqueTopics).sort();
                const topicSelect = d3.select('#topic-select');
                topicSelect.selectAll('option:not([value="all"])').remove();

                topicsArray.forEach(topic => {
                    topicSelect.append('option')
                        .attr('value', topic)
                        .text(topic);
                });
            }

            setupLegend() {
                const allQuoiTypes = this.data.nodes
                    .filter(n => n.type === 'contributor' && n.quoi)
                    .map(n => n.quoi);

                const uniqueQuoiTypes = new Set();
                allQuoiTypes.forEach(quoiString => {
                    if (quoiString.includes(',')) {
                        quoiString.split(',').forEach(type => {
                            uniqueQuoiTypes.add(type.trim());
                        });
                    } else {
                        uniqueQuoiTypes.add(quoiString.trim());
                    }
                });

                const quoiTypesArray = Array.from(uniqueQuoiTypes).sort();
                const legendContainer = d3.select('#legend-colors');
                legendContainer.selectAll('*').remove();

                const itemsPerRow = 4;
                let currentRow = null;

                quoiTypesArray.forEach((type, index) => {
                    if (index % itemsPerRow === 0) {
                        currentRow = legendContainer.append('div')
                            .attr('class', 'legend-row');
                    }

                    const item = currentRow.append('div')
                        .attr('class', 'legend-item');

                    item.append('span')
                        .attr('class', 'legend-color')
                        .style('background-color', this.colorScale(type));

                    item.append('span')
                        .text(type);
                });
            }

            filterByQuoi(type) {
                this.currentFilters.quoi = type;
                this.updateActiveButton('#quoi-filters', type);
                this.filterAndUpdate();
            }

            filterByTopic(topic) {
                this.currentFilters.topic = topic;
                d3.select('#topic-select').property('value', topic);
                this.filterAndUpdate();
            }

            filterBySource(source) {
                this.currentFilters.source = source;
                this.updateActiveButton('[onclick*="filterBySource"]', source);
                this.filterAndUpdate();
            }

            updateActiveButton(selector, activeValue) {
                if (selector.includes('filterBySource')) {
                    d3.selectAll('button[onclick*="filterBySource"]').classed('active', false);

                    if (activeValue === 'all') {
                        d3.select('button[onclick="filterBySource(\'all\')"]').classed('active', true);
                    } else if (activeValue === 'internal') {
                        d3.select('button[onclick="filterBySource(\'internal\')"]').classed('active', true);
                    } else if (activeValue === 'external') {
                        d3.select('button[onclick="filterBySource(\'external\')"]').classed('active', true);
                    }
                } else {
                    // Pour les filtres quoi - inclure aussi le bouton "Tout afficher" du parent
                    if (selector === '#quoi-filters') {
                        // Désactiver tous les boutons du container ET le bouton "Tout afficher"
                        d3.selectAll('#quoi-filters .filter-btn').classed('active', false);
                        d3.selectAll('button[onclick="filterByQuoi(\'all\')"]').classed('active', false);

                        if (activeValue === 'all') {
                            d3.selectAll('button[onclick="filterByQuoi(\'all\')"]').classed('active', true);
                        } else {
                            d3.selectAll('#quoi-filters .filter-btn')
                                .filter(function() {
                                    return d3.select(this).text() === activeValue;
                                })
                                .classed('active', true);
                        }
                    } else {
                        // Pour les autres filtres (comportement normal)
                        d3.selectAll(`${selector} .filter-btn`).classed('active', false);

                        if (activeValue === 'all') {
                            d3.select(`${selector} .filter-btn`).classed('active', true);
                        } else {
                            d3.selectAll(`${selector} .filter-btn`)
                                .filter(function() {
                                    return d3.select(this).text() === activeValue;
                                })
                                .classed('active', true);
                        }
                    }
                }
            }

            applyActiveFilters() {
                if (!this.data) return;

                let allTopics = this.data.nodes.filter(n => n.type === 'topic');
                let filteredContributors = this.data.nodes.filter(n => n.type === 'contributor');

                // Filtrer par source
                filteredContributors = filteredContributors.filter(n => {
                    return this.activeFilters.source.has(n.source);
                });

                // Filtrer par type (Quoi)
                if (this.activeFilters.quoi.size > 0) {
                    filteredContributors = filteredContributors.filter(n => {
                        if (!n.quoi) return false;
                        const quoiTypes = n.quoi.split(',').map(type => type.trim());
                        return quoiTypes.some(type => this.activeFilters.quoi.has(type));
                    });
                }

                // Filtrer les topics pour ne garder que ceux connectés aux contributeurs filtrés
                const contributorIds = filteredContributors.map(n => n.id);

                // Trouver les topics connectés
                const connectedTopicIds = new Set();
                this.data.links.forEach(l => {
                    const sourceId = typeof l.source === 'object' ? l.source.id : l.source;
                    if (contributorIds.includes(sourceId)) {
                        const targetId = typeof l.target === 'object' ? l.target.id : l.target;
                        connectedTopicIds.add(targetId);
                    }
                });

                const filteredTopics = allTopics.filter(t => connectedTopicIds.has(t.id));

                // Filtrer les liens
                const filteredLinks = this.data.links.filter(l => {
                    const sourceId = typeof l.source === 'object' ? l.source.id : l.source;
                    const targetId = typeof l.target === 'object' ? l.target.id : l.target;

                    const sourceMatch = contributorIds.includes(sourceId);
                    const targetMatch = connectedTopicIds.has(targetId);

                    return sourceMatch && targetMatch;
                });

                // Combiner les contributeurs filtrés avec les topics connectés
                const filteredNodes = [...filteredContributors, ...filteredTopics];

                this.filteredData = {
                    nodes: filteredNodes,
                    links: filteredLinks
                };

                this.updateVisualization();
            }

            filterAndUpdate() {
                // Maintenir la compatibilité avec l'ancien système
                this.applyActiveFilters();
            }

            updateVisualization() {
                if (!this.filteredData) return;

                this.container.selectAll('.link').remove();
                this.container.selectAll('.node-group').remove();
                this.container.selectAll('.node').remove();
                this.container.selectAll('.label-group').remove();

                if (this.simulation) {
                    this.simulation.stop();
                }

                this.simulation = d3.forceSimulation(this.filteredData.nodes)
                    .force('link', d3.forceLink(this.filteredData.links)
                        .id(d => d.id)
                        .distance(d => d.source.type === 'contributor' ? 50 : 40)
                        .strength(0.8))
                    .force('charge', d3.forceManyBody()
                        .strength(d => d.type === 'contributor' ? -200 : -100))
                    .force('center', d3.forceCenter(this.width / 2, this.height / 2))
                    .force('collision', d3.forceCollide()
                        .radius(d => d.type === 'contributor' ? 18 : 12))
                    .force('x', d3.forceX(this.width / 2).strength(0.05))
                    .force('y', d3.forceY(this.height / 2).strength(0.05));

                const links = this.container.selectAll('.link')
                    .data(this.filteredData.links)
                    .enter()
                    .append('line')
                    .attr('class', 'link')
                    .on('mouseover', (event, d) => this.highlightConnection(d))
                    .on('mouseout', () => this.clearHighlight());

                const nodeGroups = this.container.selectAll('.node-group')
                    .data(this.filteredData.nodes)
                    .enter()
                    .append('g')
                    .attr('class', d => `node-group ${d.type}`)
                    .on('mouseover', (event, d) => this.showNodeInfo(d))
                    .on('mouseout', () => this.clearHighlight())
                    .on('click', (event, d) => this.focusOnNode(d))
                    .call(d3.drag()
                        .on('start', (event, d) => this.dragStarted(event, d))
                        .on('drag', (event, d) => this.dragged(event, d))
                        .on('end', (event, d) => this.dragEnded(event, d)));

                nodeGroups.each(function(d) {
                    const group = d3.select(this);
                    const contributorSize = 12;
                    const topicSize = 8;
                    const size = d.type === 'contributor' ? contributorSize : topicSize;

                    let color = '#95a5a6';
                    if (d.type === 'contributor' && d.quoi) {
                        const firstType = d.quoi.split(',')[0].trim();
                        color = window.networkViz.colorScale(firstType);
                    }

                    if (d.type === 'topic') {
                        const diamondPath = `M 0,-${size} L ${size},0 L 0,${size} L -${size},0 Z`;
                        group.append('path')
                            .attr('class', 'node topic')
                            .attr('d', diamondPath)
                            .style('fill', color)
                            .style('opacity', 0.8);
                    } else {
                        if (d.source === 'internal') {
                            group.append('circle')
                                .attr('class', 'node contributor internal')
                                .attr('r', size)
                                .style('fill', color)
                                .style('opacity', 0.8);
                        } else {
                            const squareSize = size * 0.95;
                            group.append('rect')
                                .attr('class', 'node contributor external')
                                .attr('width', squareSize * 2)
                                .attr('height', squareSize * 2)
                                .attr('x', -squareSize)
                                .attr('y', -squareSize)
                                .style('fill', color)
                                .style('opacity', 0.8);
                        }
                    }
                });

                if (this.showLabels) {
                    const labelGroups = this.container.selectAll('.label-group')
                        .data(this.filteredData.nodes)
                        .enter()
                        .append('g')
                        .attr('class', 'label-group');

                    labelGroups.each(function(d) {
                        const group = d3.select(this);
                        const maxCharsPerLine = 15;
                        const name = d.name;
                        const words = name.split(' ');
                        let lines = [];
                        let currentLine = '';

                        words.forEach(word => {
                            if ((currentLine + ' ' + word).length <= maxCharsPerLine) {
                                currentLine = currentLine ? currentLine + ' ' + word : word;
                            } else {
                                if (currentLine) {
                                    lines.push(currentLine);
                                    currentLine = word;
                                } else {
                                    lines.push(word.substring(0, maxCharsPerLine));
                                    currentLine = word.substring(maxCharsPerLine);
                                }
                            }
                        });

                        if (currentLine) {
                            lines.push(currentLine);
                        }

                        if (lines.length > 2) {
                            lines = lines.slice(0, 2);
                            lines[1] = lines[1].substring(0, 12) + '...';
                        }

                        const baseY = d.type === 'contributor' ? 25 : 20;
                        const lineHeight = 12;

                        lines.forEach((line, i) => {
                            group.append('text')
                                .attr('class', d => `node-label ${d.type}-label`)
                                .text(line)
                                .attr('dy', baseY + (i * lineHeight))
                                .attr('text-anchor', 'middle');
                        });
                    });
                }

                this.simulation.on('tick', () => {
                    links
                        .attr('x1', d => d.source.x)
                        .attr('y1', d => d.source.y)
                        .attr('x2', d => d.target.x)
                        .attr('y2', d => d.target.y);

                    this.container.selectAll('.node-group')
                        .attr('transform', d => `translate(${d.x}, ${d.y})`);

                    if (this.showLabels) {
                        this.container.selectAll('.label-group')
                            .attr('transform', d => `translate(${d.x}, ${d.y})`);
                    }
                });

                this.simulation.alpha(1).restart();
            }

            showNodeInfo(node) {
                const infoContent = d3.select('#info-content');

                if (node.type === 'contributor') {
                    infoContent.html(`
                        <strong>${node.name}</strong><br>
                        <strong>Type:</strong> ${node.quoi || 'Non spécifié'}<br>
                        <strong>Topics:</strong> ${node.topic || 'Non spécifié'}<br>
                        <strong>Source:</strong> ${node.source === 'internal' ? 'Interne' : 'Externe'}
                    `);
                } else {
                    const connections = this.filteredData.links
                        .filter(l => l.target === node.id || l.target.id === node.id)
                        .length;

                    infoContent.html(`
                        <strong>Topic: ${node.name}</strong><br>
                        <strong>Connexions:</strong> ${connections} contributeur${connections > 1 ? 's' : ''}
                    `);
                }

                this.highlightNode(node);
            }

            highlightNode(node) {
                this.container.selectAll('.node-group').classed('highlighted', false);
                this.container.selectAll('.node').classed('highlighted', false);
                this.container.selectAll('.link').classed('highlighted', false);

                this.container.selectAll('.node-group')
                    .filter(d => d.id === node.id)
                    .classed('highlighted', true);

                this.container.selectAll('.node')
                    .filter(function() {
                        return d3.select(this.parentNode).datum().id === node.id;
                    })
                    .classed('highlighted', true);

                this.container.selectAll('.link')
                    .filter(d => d.source.id === node.id || d.target.id === node.id)
                    .classed('highlighted', true);
            }

            highlightConnection(link) {
                this.container.selectAll('.link').classed('highlighted', false);
                this.container.selectAll('.node-group').classed('highlighted', false);
                this.container.selectAll('.node').classed('highlighted', false);

                this.container.selectAll('.link')
                    .filter(d => d === link)
                    .classed('highlighted', true);

                this.container.selectAll('.node-group')
                    .filter(d => d.id === link.source.id || d.id === link.target.id)
                    .classed('highlighted', true);

                this.container.selectAll('.node')
                    .filter(function() {
                        const nodeData = d3.select(this.parentNode).datum();
                        return nodeData.id === link.source.id || nodeData.id === link.target.id;
                    })
                    .classed('highlighted', true);
            }

            clearHighlight() {
                this.container.selectAll('.highlighted').classed('highlighted', false);
            }

            focusOnNode(node) {
                const transform = d3.zoomIdentity
                    .translate(this.width / 2 - node.x, this.height / 2 - node.y)
                    .scale(1.5);

                this.svg.transition()
                    .duration(750)
                    .call(this.zoom.transform, transform);
            }

            resetPositions() {
                if (this.simulation) {
                    this.simulation.alpha(1).restart();
                }

                this.svg.transition()
                    .duration(750)
                    .call(this.zoom.transform, d3.zoomIdentity);
            }

            toggleLabels() {
                this.showLabels = !this.showLabels;

                if (this.showLabels) {
                    this.updateVisualization();
                } else {
                    this.container.selectAll('.label-group')
                        .transition()
                        .duration(300)
                        .style('opacity', 0);
                }
            }

            dragStarted(event, d) {
                if (!event.active) this.simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }

            dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }

            dragEnded(event, d) {
                if (!event.active) this.simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
        }

        // Fonctions globales pour les boutons
        function filterByQuoi(type) {
            if (window.networkViz) {
                window.networkViz.filterByQuoi(type);
            }
        }

        function filterByTopic(topic) {
            if (window.networkViz) {
                window.networkViz.filterByTopic(topic);
            }
        }

        function filterBySource(source) {
            if (window.networkViz) {
                window.networkViz.filterBySource(source);
            }
        }

        function resetPositions() {
            if (window.networkViz) {
                window.networkViz.resetPositions();
            }
        }

        function toggleLabels() {
            if (window.networkViz) {
                window.networkViz.toggleLabels();
            }
        }

        // Initialiser la visualisation quand la page est chargée
        document.addEventListener('DOMContentLoaded', function() {
            window.networkViz = new NetworkVisualization();
        });
    </script>
</body>
</html>
